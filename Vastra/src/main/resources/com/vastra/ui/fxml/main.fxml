<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.vastra.ui.controllers.MainController"
            stylesheets="@../css/styles.css">

    <top>
        <VBox>
            <!-- Main Toolbar -->
            <ToolBar>
                <Button text="âž• Add Product (F1)" onAction="#onAddProduct" />
                <Separator orientation="VERTICAL"/>
                <Button text="ðŸ–¨ï¸ Print Barcodes" onAction="#onPrintBarcodes" styleClass="button-secondary"/>
                <Separator orientation="VERTICAL"/>
                <Button text="ðŸ‘¤ Add Customer (F2)" onAction="#onAddCustomer" />
                <Button text="ðŸŽ Redeem Points" onAction="#onRedeemPoints" />
                <Button text="âŒ Clear Customer" onAction="#onClearCustomer" />
                <Separator orientation="VERTICAL"/>
                <Button text="ðŸ“Š Reports" onAction="#onShowReports" />
                <Button text="âš  Low Stock" onAction="#onShowLowStock" styleClass="button-warning"/>
                <Button text="âš™ Settings" onAction="#onShowSettings" />
            </ToolBar>

            <!-- Low Stock Alert Bar -->
            <HBox style="-fx-background-color: #FFF3CD; -fx-padding: 5;">
                <Label fx:id="lowStockAlertLabel" text="" style="-fx-text-fill: #856404;"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <VBox spacing="15">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <!-- Customer Information Panel -->
            <HBox spacing="20" styleClass="customer-info-box">
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="Customer:" style="-fx-font-size: 12px;"/>
                    <Label fx:id="customerNameLabel"
                           text="Walk-in Customer"
                           style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                </VBox>
                <VBox spacing="5">
                    <Label text="Loyalty Points:" style="-fx-font-size: 12px;"/>
                    <Label fx:id="customerPointsLabel"
                           text="0 points"
                           style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4CAF50;"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <VBox spacing="5" alignment="CENTER_RIGHT">
                    <Label text="1 point = â‚¹1 discount" style="-fx-font-size: 11px; -fx-text-fill: #666;"/>
                    <Label text="Earn 1 point per â‚¹100 spent" style="-fx-font-size: 11px; -fx-text-fill: #666;"/>
                </VBox>
            </HBox>

            <!-- Cart Table -->
            <VBox spacing="5" VBox.vgrow="ALWAYS">
                <Label text="SHOPPING CART"
                       style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                <TableView fx:id="cartTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="nameColumn" text="Product" prefWidth="250"/>
                        <TableColumn fx:id="qtyColumn" text="Qty" prefWidth="80"/>
                        <TableColumn fx:id="priceColumn" text="Price" prefWidth="100"/>
                        <TableColumn fx:id="taxColumn" text="Tax" prefWidth="80"/>
                        <TableColumn fx:id="totalColumn" text="Total" prefWidth="100"/>
                        <TableColumn fx:id="actionColumn" text="Action" prefWidth="100"/>
                    </columns>
                    <placeholder>
                        <Label text="Cart is empty. Scan products to add them."
                               style="-fx-font-size: 14px; -fx-text-fill: #999;"/>
                    </placeholder>
                </TableView>
            </VBox>

            <!-- Totals and Actions Section -->
            <HBox spacing="20">
                <!-- Left side - Actions -->
                <VBox spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="ACTIONS" style="-fx-font-weight: bold;"/>
                    <HBox spacing="10">
                        <Button text="ðŸ—‘ Clear Cart (F4)"
                                onAction="#onClearCart"
                                styleClass="button-danger"
                                prefWidth="150"/>
                        <Button text="â¸ Hold Sale"
                                onAction="#onHoldSale"
                                styleClass="button-secondary"
                                prefWidth="150"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Manual Discount (â‚¹):" style="-fx-padding: 5 0 0 0;"/>
                        <TextField fx:id="discountField"
                                   text="0"
                                   prefWidth="100"
                                   promptText="0.00"/>
                    </HBox>
                </VBox>

                <!-- Right side - Totals -->
                <VBox spacing="8" styleClass="totals-box" minWidth="300">
                    <HBox spacing="10">
                        <Label text="Subtotal:" styleClass="subtotal-label" HBox.hgrow="ALWAYS"/>
                        <Label fx:id="subtotalLabel"
                               text="â‚¹0.00"
                               styleClass="subtotal-label"
                               style="-fx-font-weight: bold;"/>
                    </HBox>
                    <Separator/>
                    <HBox spacing="10">
                        <Label text="Tax (GST):" styleClass="tax-label" HBox.hgrow="ALWAYS"/>
                        <Label fx:id="taxLabel"
                               text="â‚¹0.00"
                               styleClass="tax-label"/>
                    </HBox>
                    <HBox spacing="10">
                        <Label text="Discount:" styleClass="discount-label" HBox.hgrow="ALWAYS"/>
                        <Label text="- â‚¹" styleClass="discount-label"/>
                        <Label text="0.00" styleClass="discount-label"/>
                    </HBox>
                    <Separator style="-fx-background-color: #4CAF50;"/>
                    <HBox spacing="10">
                        <Label text="TOTAL:"
                               styleClass="total-label"
                               HBox.hgrow="ALWAYS"/>
                        <Label fx:id="totalLabel"
                               text="â‚¹0.00"
                               styleClass="total-label"/>
                    </HBox>
                    <Separator/>
                    <Button text="ðŸ’³ COMPLETE SALE (F3)"
                            onAction="#onCompleteSale"
                            styleClass="button-primary"
                            maxWidth="Infinity"
                            prefHeight="50"/>
                </VBox>
            </HBox>
        </VBox>
    </center>

    <bottom>
        <HBox style="-fx-background-color: #f5f5f5; -fx-padding: 10; -fx-border-color: #ddd; -fx-border-width: 1 0 0 0;">
            <Label text="Vastra Billing System v1.0 | " style="-fx-text-fill: #666;"/>
            <Label text="F1: Add Product | F2: Add Customer | F3: Complete Sale | F4: Clear Cart"
                   style="-fx-text-fill: #999; -fx-font-size: 11px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="ðŸ” Scan product barcodes - items appear automatically!"
                   style="-fx-text-fill: #4CAF50; -fx-font-weight: bold;"/>
        </HBox>
    </bottom>
</BorderPane>